<h1><%= @book.title %> Details</h1>

<% if @book.authors().any?() %>
  <h3>Here are all the authors of <%= @book.title() %>:</h3>
  <ul>
    <% @book.authors().each() do |author| %>
      <li><%= author.name() %></li>
    <% end %>
  </ul>
<% end %>

<h4>Add authors to this book:</h4>

<% if @authors.any?() %>
  <form action="/books/<%= @book.id %>" method="post">
    <input type="hidden" name="_method" value="patch">

    <% @authors.each() do |author| %>
      <div class="checkbox">
        <label>
          <input type="checkbox" name="author_ids[]" value="<%= author.id() %>"><%= author.name() %>
        </label>
      </div>
    <% end %>

    <button type="submit">Add authors</button>
  </form>
<% end %>

<form action="/books/<%= @book.id() %>" method="post">
  <input name="_method" type="hidden" value="delete">

  <button type="submit">Delete book</button>
</form>

<a href="/books">Return to book list</a>
